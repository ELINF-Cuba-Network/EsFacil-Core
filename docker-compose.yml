version: '3'

services:
    es-facil-pg:
        container_name: es-facil-pg
        image: postgres
        environment:
            POSTGRES_USER: postgres
            POSTGRES_DB: esFacil
            POSTGRES_PASSWORD: postgres

        ports:
        - "3306:3306"
        restart: always

    es-facil-web:
        build: .
        volumes:
        - .:/app
        - ~/.m2:/root/.m2
        working_dir: /app
        ports:
        - "8080:8080"
        command: mvn clean spring-boot:run
        depends_on:
        - es-facil-pg